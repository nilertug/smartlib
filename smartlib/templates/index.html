<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>SmartLib</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="text-primary">ğŸ“š SmartLib</h1>
        <div>
            <a href="/ara" class="btn btn-success">+ Yeni Kitap Ara & Ekle</a>
        </div>
    </div>

    {% if oneriler %}
    <div class="card bg-info bg-opacity-10 border-info mb-4">
        <div class="card-body">
            <h4 class="text-info-emphasis">
                ğŸŒ¤ï¸ BugÃ¼n Ankara'da Hava: 
                {% if hava == 'Clear' %} GÃ¼neÅŸli â˜€ï¸
                {% elif hava == 'Rain' %} YaÄŸmurlu ğŸŒ§ï¸
                {% elif hava == 'Clouds' %} Bulutlu â˜ï¸
                {% elif hava == 'Snow' %} KarlÄ± â„ï¸
                {% else %} {{ hava }} {% endif %}
                ({{ sicaklik|round|int }}Â°C)
            </h4>
            <p class="text-muted">GÃ¼nÃ¼n modu <strong>{{ tur }}</strong>! Ä°ÅŸte hava durumuna gÃ¶re sana Ã¶zel kitap Ã¶nerileri:</p>
            
            <div class="row">
                {% for oneri in oneriler %}
                <div class="col-md-4 mb-2">
                    <div class="d-flex align-items-center bg-white p-2 rounded shadow-sm h-100">
                        <img src="{{ oneri.resim }}" style="height: 80px; width: 60px; object-fit: cover;" class="rounded me-3">
                        <div class="w-100">
                            <h6 class="mb-1 text-truncate" style="font-size: 0.9rem; max-width: 150px;">{{ oneri.baslik }}</h6>
                            <small class="text-muted d-block text-truncate" style="max-width: 150px;">{{ oneri.yazar }}</small>
                            
                            <div class="mt-2 d-flex gap-2">
                                <a href="{{ oneri.link }}" target="_blank" class="badge bg-primary text-decoration-none">Ä°ncele</a>
                                <form action="/ekle" method="POST" class="d-inline">
                                    <input type="hidden" name="baslik" value="{{ oneri.baslik }}">
                                    <input type="hidden" name="yazar" value="{{ oneri.yazar }}">
                                    <input type="hidden" name="resim" value="{{ oneri.resim }}">
                                    <input type="hidden" name="sayfa" value="0">
                                    <button type="submit" class="badge bg-success border-0" style="cursor:pointer;">+ KÃ¼tÃ¼phaneme Ekle</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}
    <div class="btn-group mb-4">
        <a href="/" class="btn btn-outline-secondary">TÃ¼mÃ¼</a>
        <a href="/?durum=Okunacak" class="btn btn-outline-primary">Okunacaklar</a>
        <a href="/?durum=Okunuyor" class="btn btn-outline-warning">Okunuyor</a>
        <a href="/?durum=Bitti" class="btn btn-outline-success">Bitenler</a>
    </div>

    <div class="row">
        {% for kitap in kitaplar %}
        <div class="col-md-3 mb-4">
            <div class="card h-100 shadow-sm">
                <img src="{{ kitap.resim }}" class="card-img-top" style="height: 250px; object-fit: cover;">
                <div class="card-body">
                    <h5 class="card-title">{{ kitap.baslik }}</h5>
                    <p class="card-text text-muted">{{ kitap.yazar }}</p>
                    <span class="badge bg-info">{{ kitap.durum }}</span>
                    {% if kitap.puan > 0 %} <span class="text-warning">â­ {{ kitap.puan }}/5</span> {% endif %}
                </div>
                <div class="card-footer d-flex justify-content-between">
                    <a href="/detay/{{ kitap.id }}" class="btn btn-sm btn-primary">Detay & QR</a>
                    <a href="/sil/{{ kitap.id }}" class="btn btn-sm btn-danger" onclick="return confirm('Silinsin mi?')">Sil</a>
                </div>
            </div>
        </div>
        {% else %}
        <div class="col-12 text-center mt-5">
            <p class="lead text-muted">KÃ¼tÃ¼phanen boÅŸ. "Yeni Kitap Ara" butonuna bas!</p>
        </div>
        {% endfor %}
    </div>
</body>
</html>
